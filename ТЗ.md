Сервис для хранения черных списков микрозаймовых организаций.

## API

Сервис содержит несколько типов черных списков (`black-list-type`):

* `full-filled` - черный списов с полной информацией. (Фамилия, имя, отчество, дата рождения,
  серия паспорта, номер паспорта, инн, телефон, email)
* `passport-info` - черный список по серии и номеру пасспорта.
* `personal-info` - черный список по ФИО и дате рождения.
* `inn` - черный список по ИНН.
* `phone` - черный список по номеру телефона.
* `email` - черный список по email.



Все методы ниже принимают request body (и файлы) только в кодировке utf8.

Методы

* `POST /api/v1/black-list/{black-list-type}/upload-task` - загружает файл в формате .csv с записями для указанного типа черного списка.

  **Response Code**

  `201` - записи добавлены

  `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

  `400` - ошибка во время парсинга файла

  **Permissions**

  Только аутентифицированные пользователи (basic authentication)

* `POST /api/v1/black-list/{black-list-type}/add-entry-task` - добавление записи в черный список. 

   **Response Code**

  `201` - запись добавлена

  `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

  **Permissions**

  Только аутентифицированные пользователи (basic authentication)

-----

Для методов выше: с каждой созданной записью ассоциируется `partner-id`, соответствующий залогиненому пользователю.



* `PUT /api/v1/black-list/{black-list-type}/{entry-id}` - обновление конкретной записи  черного списка. Аутентифицированный не может редактировать чужие записи.

  **Request body**

  ```json
  {
  	"editable-field":"value",
      ...
  }
  ```

  `editable-field` - имя редактируемого поля (может быть несколько), для каждого типа черного списка свои:

  - `full-filled` -  `surname` фамилия, `firstName` имя, `secondName`отчество, `birthDate`дата рождения, `passSer`серия паспорта, `passNum`номер паспорта, `inn`инн, `phone`телефон, `email`email
  - `passport-info` - `passSer`серия паспорта, `passNum`номер паспорта,
  - `personal-info` -  `surname` - фамилия, `firstName` имя, `secondName`отчество, `birthDate`дата рождения
  - `phone` -  `phone ` телефон
  - `email` - `email`email

  **Response Code**

  `204` - записи обновлены

  `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

  `400` - неверный формат request body

  `404` - запись не найдена

  **Permissions**

  Только аутентифицированные пользователи (basic authentication)

* `DELETE /api/v1/black-list/{black-list-type}/{entry-id} ` - удаление записи из черного списка. Аутентифицированный пользователь не может удалять чужие записи.

   **Response Code**

  `204` - записи удалена

  `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

  `404` - запись не найдена

  **Permissions**

  Только аутентифицированные пользователи (basic authentication)

* `GET api/v1/black-list/full-filled` - возвращает все записи из полностью заполненных черных списков, добавленные пользователем. Метод используется для отображения черных списков созданных текущим аутентифицированным пользователем.

  **Response Code**

  `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

  **Response body**

  ```json
  [
  	{
          "id":"id",
          "firstName":"",
          "secondName":"",
          "surname":"",
          "birthDate":"", 
          "passSer":1234,
          "passNum":12345678, 
          "inn":123456,
          "phone":"+1-234-56-78-999",
          "email":"abcd@nj.ru"
      }, ...
  ]
  ```

  **Permissions**

  Метод доступен аутентифицированным пользователям.

* `GET api/v1/black-list/passport-info` - возвращает все записи из черных списков по паспортам, добавленные пользователем. Метод используется для отображения черных списков созданных текущим аутентифицированным пользователем.

   **Response Code**

   `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

   **Response body**

   ```json
   [
   	{
           "id":"id",
           "passSer":1234,
           "passNum":12345678, 
       }, ...
   ]
   ```

   **Permissions**

   Метод доступен аутентифицированным пользователям.

* `GET api/v1/black-list/personal-info` - возвращает все записи из черных списков по ФИО и дате рождения, добавленные пользователем. Метод используется для отображения черных списков, созданных текущим аутентифицированным пользователем.

   **Response Code**

   `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

   **Response body**

   ```json
   [
   	{
           "id":"id",
           "firstName":"",
           "secondName":"",
           "surname":"",
           "birthDate":""
       }, ...
   ]
   ```

   **Permissions**

   Метод доступен аутентифицированным пользователям.

* `GET api/v1/black-list/phone` - возвращает все записи из черных списков номеру по телефона, добавленные пользователем. Метод используется для отображения черных списков, созданных текущим аутентифицированным пользователем.

   **Response Code**

   `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

   **Response body**

   ```json
   [
   	{
           "id":"id",
           "phone":"+1-234-56-78-999"
       }, ...
   ]
   ```

   **Permissions**

   Метод доступен аутентифицированным пользователям.

* `GET api/v1/black-list/email` - возвращает все записи из черных списков по email, добавленные пользователем. Метод используется для отображения черных списков, созданных текущим аутентифицированным пользователем.

   **Response Code**

   `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

   **Response body**

   ```json
   [
   	{
           "id":"id",
           "email":"absd@abcd"
       }, ...
   ]
   ```

   **Permissions**

   Метод доступен аутентифицированным пользователям.

* `GET api/v1/black-list/inn` - возвращает все записи из черных списков по ИНН, добавленные пользователем. Метод используется для отображения черных списков, созданных текущим аутентифицированным пользователем.

   **Response Code**

   `403` - пользователь заблокирован, отсутствует заголовок Authorization, неверные креды

   **Response body**

   ```json
   [
   	{
           "id":"id",
           "inn":"123456"
       }, ...
   ]
   ```

   **Permissions**

   Метод доступен аутентифицированным пользователям.

* `POST api/black-list/find-entry-task` - проверяет наличие записи в черных списках. При том если указан `partnerId` - дальнейший поиск будет проходить только по записям, ассоциированным с указаным значением. Метод возвращает положительный ответ, если найдены совпадения хотя бы по одному указанному полю.

  **Request body**

  ```json
  {
  	//Все json-поля опциональны.
  	"partnerId":"",
  	"firstName":"",
  	"secondName":"",
      "surname":"",
  	"birthDate":"", 
      "passSer":1234,
  	"passNum":12345678, 
  	"inn":123456,
  	"phone":"+1-234-56-78-999",
  	"email":"abcd@nj.ru"
  }
  ```

  **Response Body**

  ````json
    {
    	"status":"{status-code}",
      "responseDate":"{response-date}"
    }
  
  ````

    Значения `{status-code}` :

    * 0 - Ошибка
    * 1 - В базе есть записи с хотя бы одним совпавшим полем
    * 2 - В базе нет ни одной записи с совпавшими полями

    **Permissions**

    Метод доступен аутентифицированным пользователям.

## Веб интерфейс

Для данного сервиса нужно создать веб-интерфейс со следующим функционалом:

* регистрация пользователя (логин, пароль, название организации)
* аутентификация пользователя
* просмотр записей, созданных пользователем, разделенных по типам черных списков
* редактирование записей в каждом типе черного списка
* добавление записей по одной в каждый тип черного списка
* загрузка записей файлом в формате .csv в каждый тип черного списка
* удаление записей из каждого типа черного списка

## Структура базы данных

На усмотрение разработчика


Что доделать:
1. сделать мапу в сервисе для закачики файлов
2. реализовать хэндлеры для всех типов записей в чс